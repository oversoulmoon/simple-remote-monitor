{"ast":null,"code":"import _objectSpread from\"/home/trungn/OneDrive/simple-remote-monitor/simple-remote-monitor/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/trungn/OneDrive/simple-remote-monitor/simple-remote-monitor/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{io}from\"socket.io-client\";import CardRegular from\"../ui/CardRegular\";import NetworkReport from\"./NetworkReport\";import classes from\"./Report.module.css\";import{Chart as Chartjs,ArcElement,Tooltip,Legend,CategoryScale,LinearScale,PointElement,LineElement,Title,Filler}from\"chart.js\";import{Pie}from\"react-chartjs-2\";import{Line}from\"react-chartjs-2\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";Chartjs.register(ArcElement,Tooltip,Legend,CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend,Filler);/**\n *\n * @param {{hostname: string, architecture: string, platform: string,uptime: string,cpu:string,memory: string,network: string,date: string}} props\n */function Report(props){var port=5782;var INTERVAL=2000;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),status=_useState2[0],setStatus=_useState2[1];useEffect(function(){var socket=io.connect(props.IP+\":\"+port);// const socket = io.connect(\"http://localhost:5782\");\nsocket.emit(\"get_init\");socket.on(\"send_data\",function(data){socket.close();setStatus(data);getStatus(data);});socket.on(\"error\",function(){});});function getStatus(data){var socket=io.connect(props.IP+\":\"+port);// const socket = io.connect(\"http://localhost:5782\");\nsocket.emit(\"get_status\",data);socket.on(\"send_data\",function(data){setStatus(data);setTimeout(function(){getStatus(data);},INTERVAL);socket.close();});}function generateMemoryData(memory){var used=(memory.used/1024).toFixed(1);var free=(memory.total/1024-memory.used/1024).toFixed(1);return{labels:[\"Used\",\"Free\"],datasets:[{label:\"GB\",data:[used,free],backgroundColor:[\"rgba(255, 99, 132, 0.2)\",\"rgba(54, 162, 235, 0.2)\"],borderColor:[\"rgba(255, 99, 132, 1)\",\"rgba(54, 162, 235, 1)\"],borderWidth:1}]};}function generateCPUData(cpu,idx){var labels=cpu.usage.map(function(){return\"\";});if(idx===0){console.log(labels.map(function(data,index){var load=cpu.usage[index];return load.user+load.sys;}));}return{labels:labels,datasets:[{label:\"Core \".concat(idx),data:labels.map(function(data,index){var load=cpu.usage[index];return load.user+load.sys;}),borderWidth:5,fill:true,borderColor:\"rgb(255, 99, 132)\",backgroundColor:\"rgba(255, 99, 132, 0.5)\"}]};}if(status===null){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{children:\"Loading...\"})});}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:classes.grid,children:[/*#__PURE__*/_jsxs(CardRegular,{className:classes.topRow,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:status.hostname}),/*#__PURE__*/_jsx(\"b\",{children:\"Architecture:\"}),\" \",status.architecture,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"b\",{children:\"Platform:\"}),\" \",status.platform,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"b\",{children:\"Up Time:\"}),\" \",status.uptime,\" seconds\",/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(Pie,{data:generateMemoryData(status.memory),options:{maintainAspectRatio:true,responsive:true}})]}),/*#__PURE__*/_jsx(CardRegular,{children:status.network.map(function(data,idx){return/*#__PURE__*/_jsx(NetworkReport,_objectSpread({},data),idx);})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.bigInfo,children:[/*#__PURE__*/_jsx(\"b\",{children:status.cpu[0].model}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:classes.cpuStats,children:status.cpu.map(function(proc,idx){return/*#__PURE__*/_jsx(Line,{options:{responsive:true,animation:{duration:0},plugins:{legend:{display:false}},scales:{y:{min:0,max:100,stepSize:10,display:false}}},data:generateCPUData(proc,idx)},idx);})})]})]})});}export default Report;","map":{"version":3,"names":["useEffect","useState","io","CardRegular","NetworkReport","classes","Chart","Chartjs","ArcElement","Tooltip","Legend","CategoryScale","LinearScale","PointElement","LineElement","Title","Filler","Pie","Line","register","Report","props","port","INTERVAL","status","setStatus","socket","connect","IP","emit","on","data","close","getStatus","setTimeout","generateMemoryData","memory","used","toFixed","free","total","labels","datasets","label","backgroundColor","borderColor","borderWidth","generateCPUData","cpu","idx","usage","map","console","log","index","load","user","sys","fill","grid","topRow","hostname","architecture","platform","uptime","maintainAspectRatio","responsive","network","bigInfo","model","cpuStats","proc","animation","duration","plugins","legend","display","scales","y","min","max","stepSize"],"sources":["/home/trungn/OneDrive/simple-remote-monitor/simple-remote-monitor/client/src/components/Report.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { io } from \"socket.io-client\";\nimport CardRegular from \"../ui/CardRegular\";\nimport NetworkReport from \"./NetworkReport\";\nimport classes from \"./Report.module.css\";\nimport {\n  Chart as Chartjs,\n  ArcElement,\n  Tooltip,\n  Legend,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Filler\n} from \"chart.js\";\nimport { Pie } from \"react-chartjs-2\";\nimport { Line } from \"react-chartjs-2\";\n\nChartjs.register(\n  ArcElement,\n  Tooltip,\n  Legend,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend,\n  Filler\n);\n/**\n *\n * @param {{hostname: string, architecture: string, platform: string,uptime: string,cpu:string,memory: string,network: string,date: string}} props\n */\nfunction Report(props) {\n  const port = 5782;\n  const INTERVAL = 2000;\n  var [status, setStatus] = useState(null);\n\n  useEffect(() => {\n    const socket = io.connect(props.IP + \":\" + port);\n    // const socket = io.connect(\"http://localhost:5782\");\n\n    socket.emit(\"get_init\");\n    socket.on(\"send_data\", (data) => {\n      socket.close();\n      setStatus(data);\n      getStatus(data);\n    });\n    socket.on(\"error\", () => {});\n  });\n\n  function getStatus(data) {\n    const socket = io.connect(props.IP + \":\" + port);\n    // const socket = io.connect(\"http://localhost:5782\");\n    socket.emit(\"get_status\", data);\n    socket.on(\"send_data\", (data) => {\n      setStatus(data);\n      setTimeout(() => {\n        getStatus(data);\n      }, INTERVAL);\n      socket.close();\n    });\n  }\n  function generateMemoryData(memory) {\n    var used = (memory.used / 1024).toFixed(1);\n    var free = (memory.total / 1024 - memory.used / 1024).toFixed(1);\n    return {\n      labels: [\"Used\", \"Free\"],\n      datasets: [\n        {\n          label: \"GB\",\n          data: [used, free],\n          backgroundColor: [\n            \"rgba(255, 99, 132, 0.2)\",\n            \"rgba(54, 162, 235, 0.2)\",\n          ],\n          borderColor: [\"rgba(255, 99, 132, 1)\", \"rgba(54, 162, 235, 1)\"],\n          borderWidth: 1,\n        },\n      ],\n    };\n  }\n\n  function generateCPUData(cpu, idx) {\n    var labels = cpu.usage.map(() => {\n      return \"\";\n    });\n    if (idx === 0) {\n      console.log(\n        labels.map((data, index) => {\n          var load = cpu.usage[index];\n          return load.user + load.sys;\n        })\n      );\n    }\n    return {\n      labels: labels,\n      datasets: [\n        {\n          label: `Core ${idx}`,\n          data: labels.map((data, index) => {\n            var load = cpu.usage[index];\n            return load.user + load.sys;\n          }),\n          borderWidth: 5,\n          fill:true,\n          borderColor: \"rgb(255, 99, 132)\",\n          backgroundColor: \"rgba(255, 99, 132, 0.5)\",\n        },\n      ],\n    };\n  }\n\n  if (status === null) {\n    return (\n      <div>\n        <h1>Loading...</h1>\n      </div>\n    );\n  }\n  return (\n    <div>\n      <div className={classes.grid}>\n        <CardRegular className={classes.topRow}>\n          <div>\n            <h1>{status.hostname}</h1>\n            <b>Architecture:</b> {status.architecture}\n            <br />\n            <b>Platform:</b> {status.platform}\n            <br />\n            <b>Up Time:</b> {status.uptime} seconds\n            <br />\n          </div>\n          <Pie\n            data={generateMemoryData(status.memory)}\n            options={{\n              maintainAspectRatio: true,\n              responsive: true,\n            }}\n          />\n        </CardRegular>\n        <CardRegular>\n          {status.network.map((data, idx) => {\n            return <NetworkReport key={idx} {...data} />;\n          })}\n        </CardRegular>\n        <div className={classes.bigInfo}>\n          <b>{status.cpu[0].model}</b>\n          <br/>\n          <div className={classes.cpuStats}>\n            {status.cpu.map((proc, idx) => {\n              return (\n                <Line\n                  key={idx}\n                  options={{\n                    responsive: true,\n                    animation: {\n                      duration: 0,\n                    },\n                    plugins: {\n                      legend: {\n                        display: false,\n                      },\n                    },\n                    scales:{\n                      y:{\n                        min: 0,\n                        max:100,\n                        stepSize:10,\n                        display:false\n                      }\n                    }\n                  }}\n                  data={generateCPUData(proc, idx)}\n                />\n              );\n            })}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Report;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}